!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=(new e.Error).stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="1c8437c7-25d3-4d79-9b9e-96746dd8916b",e._sentryDebugIdIdentifier="sentry-dbid-1c8437c7-25d3-4d79-9b9e-96746dd8916b")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3542],{6608:function(e,l,t){t.d(l,{$:function(){return c}});var a=t(2676),i=t(5924),n=t(5303),o=t(4988);let s=e=>{let{children:l,color:t}=e;return(0,a.jsx)("span",{className:t,children:l})},c=e=>{let{title:l,wrapWhitespace:t=!0,strongTextColor:c="text-label-primary",dataTestId:r}=e;return(0,a.jsx)("span",{className:(0,i.Z)({"relative z-30 whitespace-pre-wrap":t}),id:"".concat(r),"data-testid":"".concat(r,"-head-title"),children:(0,a.jsx)(n.D,{rehypePlugins:[o.Z],components:{p:e=>{let{children:l}=e;return(0,a.jsx)(a.Fragment,{children:l})},strong:e=>(0,a.jsx)(s,{...e,color:c})},children:l})})}},3055:function(e,l,t){t.d(l,{e:function(){return r}});var a=t(2676),i=t(5924),n=t(5271),o=t(7342),s=t(9245),c=t(1894);let r=e=>{let{sectionName:l}=e,{developerInfoList:{Others:{isSectionNumberVisible:t}}}=(0,c.C1)(),r=(0,n.useId)();return(0,s.rx)()?null:(0,a.jsx)(o.H4,{dataTestId:"".concat(l,"-section-label"),className:(0,i.Z)("dev-section-label bg-surface-positive-container text-label-positive-alternative absolute right-0 top-0 z-50 px-3 opacity-90",{hidden:!t}),children:"".concat(l,"-").concat(r.replace(/\:/g,""))})}},3542:function(e,l,t){t.r(l),t.d(l,{RideMainBlockSection:function(){return y},RideMainBlockSectionGoogleMap:function(){return O}});var a=t(2676),i=t(7838),n=t(162),o=t(5924),s=t(8567),c=t.n(s),r=t(6608),d=t(3055),p=t(740),u=t(3779),g=t(5271);let m=e=>{let{type:l,label:t,searchValue:i,isOpen:n,message:o,isError:s,handleOpen:c,handleChange:r,handleOutsideClick:d,placeholder:g,predictions:m,handlePlaceSelect:v,handleCurrentLocationSelect:h,inputRef:x}=e;return(0,a.jsxs)(p.G,{inputRef:x,type:l,label:t,searchValue:i,open:n,handleOpen:c,onOutsideClick:d,pickupInputMessage:o,destinationInputMessage:o,inputVariant:s?"destructive":"default",onChange:r,placeholder:g,children:["pickup"===l&&(0,a.jsx)("button",{type:"button",onClick:h,children:(0,a.jsx)(u.H,{as:"menuitem",size:"sm",title:"Use current location",leadingType:"icon",showDivider:!0,leadingElement:{icon:{name:"Mark"}}})}),m.map(e=>{let{description:t,place_id:i}=e,[n,...o]=t.split(",");return(0,a.jsx)(u.H,{title:n,onClick:()=>{v(i,l)},description:o.join(""),leadingType:"icon",size:"sm",leadingElement:{icon:{name:"Mark"}}},i)})]})};var v=t(4501),h=t(4221),x=t(4224);let b=()=>{let e=(0,v.useRouter)(),l="https://dev-api.yassir.io/public/api/v1",t=x.env.NEXT_PUBLIC_RIDER_APP_TOKEN,{fromMedia:a}=(0,h.ac)(),i=a({mobile:"display4",sm:"display4",md:"display4",desktop:"display4",lg:"display3",xl:"display3"}),n=a({mobile:"sm",sm:"sm",md:"sm",desktop:"sm",lg:"md",xl:"md"}),[o,s]=(0,g.useState)(""),[c,r]=(0,g.useState)(""),[d,p]=(0,g.useState)([]),[u,m]=(0,g.useState)(""),[b,f]=(0,g.useState)({isOpen:!1,value:"",placeId:"",placeDetails:{},isError:!1}),[y,k]=(0,g.useState)({isOpen:!1,value:"",placeId:"",placeDetails:{},isError:!1}),w={method:"GET",headers:{"Content-Type":"application/json",Authorization:t}},j=async()=>{try{let t=await fetch("".concat(l,"/locations/places_autocomplete?input=").concat(c||o,"&language=").concat(e.locale),w);if(200===t.status)return await t.json();throw Error("Error fetching data")}catch(e){throw Error("Error fetching data")}};(0,g.useEffect)(()=>{(c.length>=3||o.length>=3)&&j().then(e=>{p(e.predictions)}),p([])},[c,o]);let O=async(t,a)=>{let i=await fetch("".concat(l,"/locations/place_details?placeid=").concat(t,"&language=").concat(e.locale),w),{status:n,result:o}=await i.json();if("OK"===n){let{formatted_address:e}=o;"pickup"===a?(f(e=>({...e,placeId:"",placeDetails:{}})),f(l=>({...l,value:e,isOpen:!1,placeId:t,placeDetails:o}))):(k(e=>({...e,placeId:"",placeDetails:{}})),k(l=>({...l,value:e,isOpen:!1,placeId:t,placeDetails:o})))}};return(0,g.useEffect)(()=>{setTimeout(()=>{f(e=>({...e,isError:!1})),k(e=>({...e,isError:!1})),m("")},5e3)},[u,b.isError]),{titleVariant:i,buttonSize:n,handleAddressChange:(e,l)=>{let t=e.target.value;"pickup"===l?(s(""),f(e=>({...e,value:t})),r(t)):(r(""),k(e=>({...e,value:t})),s(t))},handlePlaceSelect:O,handleCurrentLocationSelect:()=>{navigator.geolocation.getCurrentPosition(async e=>{let{longitude:t,latitude:a}=e.coords,i=await fetch("".concat(l,"/locations/geocode?location=").concat(a,",").concat(t),w),{success:n,errorMessage:o}=await i.json();n||(f(e=>({...e,isOpen:!1,isError:!0})),m(o))})},predictions:d,pickupAddressDetails:b,destinationAddressDetails:y,message:u,setPickupAddressDetails:f,setDestinationAddressDetails:k,destinationAddress:o,handleClick:()=>{var e,l;if((null===(e=b.placeDetails.place_id)||void 0===e?void 0:e.length)&&(null===(l=y.placeDetails.place_id)||void 0===l?void 0:l.length)){let e="".concat(b.placeDetails.geometry.location.lat,",").concat(b.placeDetails.geometry.location.lng),l="".concat(y.placeDetails.geometry.location.lat,",").concat(y.placeDetails.geometry.location.lng),t=b.placeId,a=y.placeId,i="".concat("https://mobility-app.yassir.com","?pickup=").concat(e,"&destination=").concat(l,"&pickupPlaceid=").concat(t,"&destinationPlaceid=").concat(a);window.open(i,"_blank")}else f(e=>({...e,isError:!0})),k(e=>({...e,isError:!0}))}}},f="ride-main-block-section",y=e=>{let{data:l,richTitleColor:t,classNames:s}=e,{title:p,richTitle:u,inputs:g,button:v,image:h}=l,{titleVariant:x,buttonSize:y,handleAddressChange:k,handlePlaceSelect:w,handleCurrentLocationSelect:j,predictions:O,pickupAddressDetails:S,destinationAddressDetails:E,message:_,setPickupAddressDetails:C,setDestinationAddressDetails:N,handleClick:P}=b(),I=(e,l)=>{"pickup"===e?C(l):N(l)};return(0,a.jsxs)("section",{"data-testid":f,className:(0,o.Z)("relative overflow-hidden bg-surface-neutral bg-[url('/images/global/Pattern.png')] desktop:h-full desktop:min-h-full",s),children:[(0,a.jsx)(d.e,{sectionName:f}),(0,a.jsx)("div",{className:"absolute inset-0 w-full bg-[url('/images/global/ride-main-block/gradient.svg')] bg-no-repeat opacity-50 mix-blend-screen blur-[300px] sm:bg-[url('/images/global/ride-main-block/gradient-sm.svg')] md:bg-[url('/images/global/ride-main-block/gradient-md.svg')] md:blur-[150px] lg:bg-[url('/images/global/ride-main-block/gradient-lg.svg')] xl:bg-[url('/images/global/ride-main-block/gradient-xl.svg')] xl:rtl:-scale-x-100"}),(0,a.jsxs)("div",{className:"section flex flex-col gap-4 pt-10 md:gap-10 lg:flex-row lg:items-center lg:justify-between lg:py-30",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-8 sm:py-11 md:py-0 lg:w-[560px] lg:gap-12",children:[(0,a.jsx)(i.Z,{dataTestId:"".concat(f,"-title"),className:"text-label-static-low",variant:x,children:(0,a.jsx)(r.$,{title:null!=u?u:p,strongTextColor:null!=t?t:""})}),(0,a.jsxs)("form",{className:"dark flex flex-col gap-4 lg:gap-6 [&_[data-radix-popper-content-wrapper]>div]:!max-h-[295px] [&_[data-radix-popper-content-wrapper]]:!bg-surface-neutral",children:[(0,a.jsx)(m,{type:"pickup",label:g.pickUp.label,searchValue:S.value,isOpen:S.isOpen,message:_.length?_:S.isError?"Please select a valid destination":"",isError:S.isError,handleOpen:()=>{I("pickup",e=>({...e,isOpen:!0}))},handleChange:e=>{k(e,"pickup")},handleOutsideClick:()=>{I("pickup",e=>({...e,isOpen:!1}))},placeholder:g.pickUp.placeholder,predictions:O,handlePlaceSelect:w,handleCurrentLocationSelect:j}),(0,a.jsx)(m,{type:"destination",label:g.dropOff.label,searchValue:E.value,isOpen:E.isOpen,message:E.isError?"Please select a valid destination":"",isError:E.isError,handleOpen:()=>{I("destination",e=>({...e,isOpen:!0}))},handleChange:e=>{k(e,"destination")},handleOutsideClick:()=>{I("destination",e=>({...e,isOpen:!1}))},placeholder:g.dropOff.placeholder,predictions:O,handlePlaceSelect:w})]}),(0,a.jsx)(n.z,{className:"mix-blend-lighten",full:!0,onClick:P,size:y,children:v.label})]}),(0,a.jsx)("div",{className:"dark relative -mx-4 h-[149px] overflow-hidden sm:h-[400px] md:-mx-8 md:h-[548px] lg:m-0 lg:my-[88px] lg:h-[450px] lg:w-[476px] lg:rounded-3xl xl:my-12 xl:h-[532px] xl:w-[562px]",children:(0,a.jsx)(c(),{className:"w-full object-cover object-[0_25%] md:object-[0]",src:h.data.attributes.url,alt:h.data.attributes.alternativeText,fill:!0})})]})]})};y.displayName="ride-main-block-section";var k=t(7564);let w=["places"],j="ride-main-block-section",O=e=>{var l,t,s,m,x,b,f,y,O,S,E,_,C,N,P;let{data:I,richTitleColor:T,classNames:D}=e,z=(0,v.useRouter)(),R=z.asPath.includes("/algeria/"),{isLoaded:L}=(0,k.Db)({googleMapsApiKey:"AIzaSyCNgokqHpiAweOvV2w5BStGSrrpdLY727w",libraries:w}),{fromMedia:M}=(0,h.ac)(),V=M({mobile:"display4",sm:"display4",md:"display4",desktop:"display4",lg:"display3",xl:"display3"}),G=M({mobile:"sm",sm:"sm",md:"sm",desktop:"sm",lg:"md",xl:"md"}),{title:K,richTitle:U,inputs:A,button:H,image:Z}=I,B=(0,g.useRef)(null),$=(0,g.useRef)(null),q=(0,g.useRef)(null),F=(0,g.useRef)(null),[X,Y]=(0,g.useState)([]),[J,Q]=(0,g.useState)(""),[W,ee]=(0,g.useState)(null),[el,et]=(0,g.useState)(!1),[ea,ei]=(0,g.useState)(null),[en,eo]=(0,g.useState)(!1),[es,ec]=(0,g.useState)([]),[er,ed]=(0,g.useState)(""),[ep,eu]=(0,g.useState)(null),[eg,em]=(0,g.useState)(!1),[ev,eh]=(0,g.useState)(null),[ex,eb]=(0,g.useState)(!1);(0,g.useEffect)(()=>{L&&window.google&&(q.current=new google.maps.places.AutocompleteService,F.current=new google.maps.places.PlacesService(document.createElement("div")))},[L]);let ef=e=>{if(Q(e.description),F.current&&e.place_id){let l={placeId:e.place_id,fields:["geometry","formatted_address"]};F.current.getDetails(l,(l,t)=>{var a;t===google.maps.places.PlacesServiceStatus.OK&&(null==l?void 0:null===(a=l.geometry)||void 0===a?void 0:a.location)&&(ei(e.place_id),ee(new google.maps.LatLng(l.geometry.location.lat(),l.geometry.location.lng())))})}setTimeout(()=>{et(!1)},100)},ey=e=>{if(ed(e.description),F.current&&e.place_id){let l={placeId:e.place_id,fields:["geometry","formatted_address"]};F.current.getDetails(l,(l,t)=>{var a;t===google.maps.places.PlacesServiceStatus.OK&&(null==l?void 0:null===(a=l.geometry)||void 0===a?void 0:a.location)&&(eh(e.place_id),eu(new google.maps.LatLng(l.geometry.location.lat(),l.geometry.location.lng())))})}setTimeout(()=>{em(!1)},100)},ek="".concat("https://mobility-app.yassir.com","?pickup=").concat(null==W?void 0:W.lat(),",").concat(null==W?void 0:W.lng(),"&destination=").concat(null==ep?void 0:ep.lat(),",").concat(null==ep?void 0:ep.lng(),"&").concat(ea?"pickupPlaceid=".concat(ea,"&"):"","destinationPlaceid=").concat(ev);return(0,g.useEffect)(()=>{setTimeout(()=>{eo(!1),eb(!1)},5e3)},[en,ex]),(0,a.jsxs)("section",{"data-testid":j,className:(0,o.Z)("relative overflow-hidden bg-surface-neutral bg-[url('/images/global/Pattern.png')] desktop:h-full desktop:min-h-full",D),children:[(0,a.jsx)(d.e,{sectionName:j}),(0,a.jsx)("div",{className:"absolute inset-0 w-full bg-[url('/images/global/ride-main-block/gradient.svg')] bg-no-repeat opacity-50 mix-blend-screen blur-[300px] sm:bg-[url('/images/global/ride-main-block/gradient-sm.svg')] md:bg-[url('/images/global/ride-main-block/gradient-md.svg')] md:blur-[150px] lg:bg-[url('/images/global/ride-main-block/gradient-lg.svg')] xl:bg-[url('/images/global/ride-main-block/gradient-xl.svg')] xl:rtl:-scale-x-100"}),(0,a.jsxs)("div",{className:"section flex flex-col gap-4 pt-10 md:gap-10 lg:flex-row lg:items-center lg:justify-between lg:py-30",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-8 sm:py-11 md:py-0 lg:w-[560px] lg:gap-12",children:[(0,a.jsx)(i.Z,{dataTestId:"".concat(j,"-title"),className:"text-label-static-low",variant:V,children:(0,a.jsx)(r.$,{title:null!=U?U:K,strongTextColor:null!=T?T:""})}),(0,a.jsxs)("form",{className:"dark flex flex-col gap-4 lg:gap-6",children:[(0,a.jsxs)(p.G,{type:"pickup",inputRef:B,label:null===(l=A.pickUp)||void 0===l?void 0:l.label,searchValue:J,onChange:e=>{let l=e.target.value;if(Q(l),el||et(!0),l.trim()){let e=setTimeout(()=>{var e;null===(e=q.current)||void 0===e||e.getPlacePredictions({input:l,componentRestrictions:R?{country:"dz"}:void 0},(e,l)=>{l===google.maps.places.PlacesServiceStatus.OK&&e?Y(e):Y([])})},150);return()=>{clearTimeout(e)}}Y([])},open:el,placeholder:null===(t=A.pickUp)||void 0===t?void 0:t.placeholder,inputVariant:en?"destructive":"default",pickupInputMessage:en?null===(s=A.pickUp)||void 0===s?void 0:s.message:"",handleOpen:()=>{et(!0)},onOutsideClick:()=>{et(!1),Y([])},children:[(0,a.jsx)("button",{type:"button",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let{latitude:l,longitude:t}=e.coords,a=new google.maps.LatLng(l,t);new google.maps.Geocoder().geocode({location:a},(e,l)=>{"OK"===l&&(null==e?void 0:e.length)&&(Q(e[0].formatted_address),ee(a),ei(e[0].place_id),et(!1))})}):console.error("Geolocation is not supported by this browser.")},children:(0,a.jsx)(u.H,{as:"menuitem",size:"sm",title:null===(m=A.pickUp)||void 0===m?void 0:m.currentLocationLabel,leadingType:"icon",showDivider:X.length>0,leadingElement:{icon:{name:"Mark"}}})}),X.map(e=>(0,a.jsx)(u.H,{title:e.description,onClick:()=>{ef(e)},leadingType:"icon",size:"sm",leadingElement:{icon:{name:"Mark"}}},e.place_id))]}),(0,a.jsx)(p.G,{type:"destination",inputRef:$,label:null===(x=A.dropOff)||void 0===x?void 0:x.label,searchValue:er,onChange:e=>{let l=e.target.value;if(ed(l),eg||em(!0),l.trim()){let e=setTimeout(()=>{var e;null===(e=q.current)||void 0===e||e.getPlacePredictions({input:l,componentRestrictions:R?{country:"dz"}:void 0},(e,l)=>{l===google.maps.places.PlacesServiceStatus.OK&&e?ec(e):ec([])})},150);return()=>{clearTimeout(e)}}ec([])},open:eg,placeholder:null===(b=A.dropOff)||void 0===b?void 0:b.placeholder,inputVariant:ex?"destructive":"default",handleOpen:()=>{em(!0)},onOutsideClick:()=>{em(!1),ec([])},destinationInputMessage:ex?null===(f=A.dropOff)||void 0===f?void 0:f.message:"",children:es.map(e=>(0,a.jsx)(u.H,{title:e.description,onClick:()=>{ey(e)},leadingType:"icon",size:"sm",leadingElement:{icon:{name:"Mark"}}},e.place_id))})]}),(0,a.jsx)(n.z,{className:"mix-blend-lighten",full:!0,onClick:()=>{W&&J.length||eo(!0),ep&&er.length||eb(!0),W&&ep&&J&&er&&z.push(ek)},size:G,children:H.label})]}),(0,a.jsx)("div",{className:"dark relative -mx-4 h-[149px] overflow-hidden sm:h-[400px] md:-mx-8 md:h-[548px] lg:m-0 lg:my-[88px] lg:h-[450px] lg:w-[476px] lg:rounded-3xl xl:my-12 xl:h-[532px] xl:w-[562px]",children:(0,a.jsx)(c(),{className:"w-full object-cover object-[0_25%] md:object-[0]",src:null!==(N=null===(O=Z.data)||void 0===O?void 0:null===(y=O.attributes)||void 0===y?void 0:y.url)&&void 0!==N?N:null===(S=Z.data)||void 0===S?void 0:S.url,alt:null!==(P=null===(_=Z.data)||void 0===_?void 0:null===(E=_.attributes)||void 0===E?void 0:E.alternativeText)&&void 0!==P?P:null===(C=Z.data)||void 0===C?void 0:C.alternativeText,fill:!0})})]})]})};O.displayName="ride-main-block-section"}}]);